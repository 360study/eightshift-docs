(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{193:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return r})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return c}));var n=a(1),l=a(9),o=(a(0),a(252)),i={id:"blocks-styles",title:"Styles",sidebar_label:"Styles"},r={id:"basics/blocks-styles",title:"Styles",description:"[![docs-source](https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a)](https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/)",source:"@site/docs/basics/blocks-styles.md",permalink:"/eightshift-docs/docs/basics/blocks-styles",sidebar_label:"Styles",sidebar:"docs",previous:{title:"Reusable Blocks",permalink:"/eightshift-docs/docs/basics/blocks-reusable"},next:{title:"Storybook",permalink:"/eightshift-docs/docs/basics/blocks-storybook"}},b=[{value:"Setup",id:"setup",children:[]},{value:"Details",id:"details",children:[]},{value:"Global variables",id:"global-variables",children:[]},{value:"Variable Defaults",id:"variable-defaults",children:[]},{value:"Color variables",id:"color-variables",children:[]},{value:"Complex attribute variables",id:"complex-attribute-variables",children:[{value:"Complex attribute variables inside the Block editor",id:"complex-attribute-variables-inside-the-block-editor",children:[]}]},{value:"Boolean variables",id:"boolean-variables",children:[{value:"Boolean variables inside the Block editor",id:"boolean-variables-inside-the-block-editor",children:[]}]},{value:"Manual variables",id:"manual-variables",children:[]},{value:"Manual variables inside the Block editor",id:"manual-variables-inside-the-block-editor",children:[]}],s={rightToc:b};function c(e){var t=e.components,a=Object(l.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/"}),Object(o.b)("img",Object(n.a)({parentName:"a"},{src:"https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a",alt:"docs-source"})))),Object(o.b)("p",null,"We decided to remove all support for IE 11.  That decision opened up doors that lead to new, awesome features and all the cool stuff. One of those features is CSS variables with block manifest and global settings."),Object(o.b)("p",null,"Let's dig into the implementation of CSS variables in your project."),Object(o.b)("h2",{id:"setup"},"Setup"),Object(o.b)("p",null,"To be able to use CSS variables you need to implement two helpers in your blocks/components: ",Object(o.b)("inlineCode",{parentName:"p"},"outputCssVariables")," and ",Object(o.b)("inlineCode",{parentName:"p"},"getUnique"),". For more details on these helpers, you can read ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"helpers-javascript#outputcssvariables"}),"here"),". "),Object(o.b)("p",null,"There are a few differences between the JavaScript and PHP implementation due to a way React handles component re-rendering."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"typography-editor.js")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import React, { useMemo } from 'react';\nimport { outputCssVariables, getUnique } from '@eightshift/frontend-libs/scripts/editor';\nimport manifest from '../manifest.json';\n\nexport const TypographyEditor = (attributes) => {\n\n  // We need to use memo in order to optimise component re-rendering.\n  const unique = useMemo(() => getUnique(), []);\n\n  return (\n    <>\n      {outputCssVariables(attributes, manifest, unique)}\n\n      <div data-id={unique}>\n        {/*Regular component implementation*/}\n      </div>\n    </>\n  );\n};\n")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"typography.php")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),'/**\n * Template for the Typography Component.\n *\n * @package Eightshift_Boilerplate\n */\n\nuse EightshiftLibs\\Helpers\\Components;\n\n$manifest = Components::getManifest(__DIR__);\n\n$unique = Components::getUnique();\necho Components::outputCssVariables($attributes, $manifest, $unique); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped\n\n?>\n\n<div data-id="<?php echo esc_attr($unique); ?>">\n  // Regular component implementation\n</div>\n')),Object(o.b)("p",null,"Now that we have helpers in place, let's see how they work and what features they offer."),Object(o.b)("h2",{id:"details"},"Details"),Object(o.b)("p",null,"CSS variables helper consists of 2 helpers. ",Object(o.b)("inlineCode",{parentName:"p"},"outputCssVariables")," helper will output all CSS variables set in your blocks/component manifest and ",Object(o.b)("inlineCode",{parentName:"p"},"getUnique")," helper will make sure that variables are applied only to the exact block/component."),Object(o.b)("p",null,"If you check your rendered website you can see that you have something like this:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<style>\n  .typography[data-id=\'210c9bbf733ef5c6aa74c49168ac29a7\'] {\n    --typography-color: var(--global-colors-black);\n    --typography-content-align: left;\n  }\n</style>\n\n<div class="typography" data-id="210c9bbf733ef5c6aa74c49168ac29a7">...</div>\n')),Object(o.b)("p",null,"This is all that's required for the magic of CSS variables to work! Now let's see it in action and check out all additional features you can use."),Object(o.b)("h2",{id:"global-variables"},"Global variables"),Object(o.b)("p",null,"Now that we know how CSS variables are generated, we have one more helper to describe.\nThe ",Object(o.b)("inlineCode",{parentName:"p"},"outputCssVariablesGlobal(globalSettings);")," helper is called in the ",Object(o.b)("inlineCode",{parentName:"p"},"application-blocks-editor.js")," file. It is used to output all CSS variables from the global manifest under the ",Object(o.b)("inlineCode",{parentName:"p"},"globalVariables")," key, into the ",Object(o.b)("inlineCode",{parentName:"p"},":root")," selector."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"All of these variables are available to use inside your blocks/components.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Global Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "namespace": "eightshift-boilerplate",\n  "background": "#D8262C",\n  "foreground": "#FFFFFF",\n  "globalVariables": {\n    "customBlocksName": "eightshift-block",\n    "maxCols": 12,\n    "breakpoints": {\n      "mobile": 479,\n      "tablet": 1279,\n      "desktop": 1919,\n      "large": 1920\n    },\n    "containers": {\n      "default": "1330px"\n    },\n    "gutters": {\n      "none": "0",\n      "default": "25px",\n      "big": "50px"\n    },\n    "sectionSpacing": {\n      "min":  -300,\n      "max":  300,\n      "step": 10\n    },\n    "sectionInSpacing": {\n      "min":  0,\n      "max":  300,\n      "step": 10\n    },\n    "colors": [\n      {\n        "name": "Black",\n        "slug": "black",\n        "color": "#111111"\n      },\n      {\n        "name": "White",\n        "slug": "white",\n        "color": "#FFFFFF"\n      }\n    ]\n  }\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),"<style>\n  :root {\n    --global-custom-blocks-name: eightshift-block;\n    --global-max-cols: 12;\n    --global-breakpoints-mobile: 479;\n    --global-breakpoints-tablet: 1279;\n    --global-breakpoints-desktop: 1919;\n    --global-breakpoints-large: 1920;\n    --global-containers-default: 1330px;\n    --global-gutters-none: 0;\n    --global-gutters-default: 25px;\n    --global-gutters-big: 50px;\n    --global-section-spacing-min: -300;\n    --global-section-spacing-max: 300;\n    --global-section-spacing-step: 10;\n    --global-section-in-spacing-min: 0;\n    --global-section-in-spacing-max: 300;\n    --global-section-in-spacing-step: 10;\n    --global-colors-black: #111111;\n    --global-colors-white: #FFFFFF;\n  }\n</style>\n")),Object(o.b)("p",null,"You can use a global variable like any other CSS variable:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"color: var(--global-colors-white);\n")),Object(o.b)("h2",{id:"variable-defaults"},"Variable Defaults"),Object(o.b)("p",null,"As we said in the beginning, all CSS variables are defined within the block/component manifest. To avoid outputting all of the variables (because you might not need them all), the attributes that will be output as variables need to be defined."),Object(o.b)("p",null,"To output an attribute as a CSS variable, you need to set the ",Object(o.b)("inlineCode",{parentName:"p"},"variable")," key to ",Object(o.b)("inlineCode",{parentName:"p"},"default"),". This way you will get the output of the default value or value set in the database."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "attributes": {\n    "typographySize": {\n      "type": "string",\n      "default": "120-default",\n      "variable": "default"\n    }\n  },\n  "options": {\n    "typographySize": [\n      {\n        "label": "180 Display",\n        "value": "180-default"\n      },\n      {\n        "label": "120 Display",\n        "value": "120-default"\n      },\n      {\n        "label": "80 Display",\n        "value": "80-default"\n      }\n    ]\n  }\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-size: 120-default\n")),Object(o.b)("h2",{id:"color-variables"},"Color variables"),Object(o.b)("p",null,"If you have an attribute that represent colors from global variables, you can output the CSS variable for color directly."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "attributes": {\n    "typographyColor": {\n      "type": "string",\n      "default": "white",\n      "variable": "color"\n    }\n  },\n  "options": {\n    "typographyColor": [\n      {\n        "name": "White",\n        "slug": "white",\n        "color": "#ffffff"\n      },\n      {\n        "name": "Black",\n        "slug": "black",\n        "color": "#111111"\n      },\n    ]\n  }\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-color: var(--global-colors-white);\n")),Object(o.b)("h2",{id:"complex-attribute-variables"},"Complex attribute variables"),Object(o.b)("p",null,"If you have attributes stored as objects (for example used in the ",Object(o.b)("inlineCode",{parentName:"p"},"SelectControl")," component), by default CSS variable generator will output the ",Object(o.b)("inlineCode",{parentName:"p"},"value")," stored in the attribute.\nSetting the ",Object(o.b)("inlineCode",{parentName:"p"},"variable")," key to ",Object(o.b)("inlineCode",{parentName:"p"},"select"),", the CSS variable generator will look for the ",Object(o.b)("inlineCode",{parentName:"p"},"variable")," key in the manifest ",Object(o.b)("inlineCode",{parentName:"p"},"options")," field."),Object(o.b)("p",null,"If the ",Object(o.b)("inlineCode",{parentName:"p"},"variable")," key is not set in options, the ",Object(o.b)("inlineCode",{parentName:"p"},"value")," key will be used as fallback."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"You can write any CSS declaration or variable in the custom variable key.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "attributes": {\n    "typographySize": {\n      "type": "string",\n      "default": "120-default",\n      "variable": "select"\n    }\n  },\n  "options": {\n    "typographySize": [\n      {\n        "label": "180 Display",\n        "value": "180-default",\n        "variable": "something"\n      },\n      {\n        "label": "120 Display",\n        "value": "120-default",\n        "variable": "somethingNew"\n      },\n      {\n        "label": "80 Display",\n        "value": "80-default",\n        "variable": "somethingNew2"\n      }\n    ]\n  }\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-size: somethingNew\n")),Object(o.b)("h3",{id:"complex-attribute-variables-inside-the-block-editor"},"Complex attribute variables inside the Block editor"),Object(o.b)("p",null,"If you want to show different variables on the frontend and in the editor you can use the ",Object(o.b)("inlineCode",{parentName:"p"},"variableEditor")," key to output a different variable inside the block editor."),Object(o.b)("p",null,"If ",Object(o.b)("inlineCode",{parentName:"p"},"variableEditor")," is not present on all the options, the fallback behaviour is as follows:"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Block editor fallback tree:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"variableEditor")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"variable")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"value"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Frontend fallback tree:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"variable")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"value"))),Object(o.b)("h2",{id:"boolean-variables"},"Boolean variables"),Object(o.b)("p",null,"By default, the CSS variable generator will output values stored in attributes. That means that boolean variables will get output as variables with ",Object(o.b)("inlineCode",{parentName:"p"},"true")," and ",Object(o.b)("inlineCode",{parentName:"p"},"false")," values, which might be something you don't want.\nIf you set the ",Object(o.b)("inlineCode",{parentName:"p"},"variable")," key to ",Object(o.b)("inlineCode",{parentName:"p"},"boolean"),", the CSS variable generator will look for the ",Object(o.b)("inlineCode",{parentName:"p"},"index")," array in the manifest options. The first value reprents the value if attribute is ",Object(o.b)("inlineCode",{parentName:"p"},"false"),", and the second when it's ",Object(o.b)("inlineCode",{parentName:"p"},"true"),"."),Object(o.b)("p",null,"If the ",Object(o.b)("inlineCode",{parentName:"p"},"variable")," key is not set in options, the fallback is to output the value inside the CSS variable."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"You can write any CSS declaration or variable in the custom variable key.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "attributes": {\n    "typographyUse": {\n      "type": "boolean",\n      "default": true,\n      "variable": "boolean"\n    }\n  },\n  "options": {\n    "typographyUse": [\n      "somethingFalse",\n      "somethingTrue"\n    ]\n  }\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-size: somethingTrue\n")),Object(o.b)("h3",{id:"boolean-variables-inside-the-block-editor"},"Boolean variables inside the Block editor"),Object(o.b)("p",null,"If you want to show different variables on the frontend and inside the Block editor you can use add values to the ",Object(o.b)("inlineCode",{parentName:"p"},"index")," key in options. The third value represents the value if false and the fourth editor value if true. Fallback tree is same as in Complex variables."),Object(o.b)("h2",{id:"manual-variables"},"Manual variables"),Object(o.b)("p",null,"There is an option to add custom CSS variables that get output independently from all the attributes. Just add a top-level ",Object(o.b)("inlineCode",{parentName:"p"},"variables")," key inside the manifest and add each variable as an array item.\nManual variables will be added at the end of the output."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "attributes": {\n    // ...\n  },\n  "variables": [\n    "--variable1: test1",\n    "--variable2: test2",\n    "--variable3: test3"\n  ]\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--variable1: test1;\n--variable2: test2;\n--variable3: test3;\n")),Object(o.b)("h2",{id:"manual-variables-inside-the-block-editor"},"Manual variables inside the Block editor"),Object(o.b)("p",null,"If you want to add manual variables that only apply inside the Block editor you can use the ",Object(o.b)("inlineCode",{parentName:"p"},"variablesEditor")," key. Everything works the same as described in the ",Object(o.b)("em",{parentName:"p"},"Manual variables")," section.\nIf you define both ",Object(o.b)("inlineCode",{parentName:"p"},"variablesEditor")," and ",Object(o.b)("inlineCode",{parentName:"p"},"variables"),", both will be output in the editor, but only ",Object(o.b)("inlineCode",{parentName:"p"},"variables")," will be output on the frontend."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Manifest:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "attributes": {\n    // ...\n  },\n  "variablesEditor": [\n    "--variable1: test1",\n    "--variable2: test2",\n    "--variable3: test3"\n  ]\n}\n')),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Output:")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--variable1: test1;\n--variable2: test2;\n--variable3: test3;\n")))}c.isMDXComponent=!0},252:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),l=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=l.a.createContext({}),c=function(e){var t=l.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r({},t,{},e)),a},p=function(e){var t=c(e.components);return l.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,s=b(e,["components","mdxType","originalType","parentName"]),p=c(a),d=n,m=p["".concat(i,".").concat(d)]||p[d]||u[d]||o;return a?l.a.createElement(m,r({ref:t},s,{components:a})):l.a.createElement(m,r({ref:t},s))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=d;var r={};for(var b in t)hasOwnProperty.call(t,b)&&(r[b]=t[b]);r.originalType=e,r.mdxType="string"==typeof e?e:n,i[1]=r;for(var s=2;s<o;s++)i[s]=a[s];return l.a.createElement.apply(null,i)}return l.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);