(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{183:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return l})),o.d(t,"metadata",(function(){return i})),o.d(t,"rightToc",(function(){return c})),o.d(t,"default",(function(){return b}));var n=o(1),r=o(9),a=(o(0),o(248)),l={id:"blocks-special-use-cases",title:"Special Use Cases",sidebar_label:"Special Use Cases"},i={id:"basics/blocks-special-use-cases",title:"Special Use Cases",description:"[![docs-source](https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a)](https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/)",source:"@site/docs/basics/blocks-special-use-cases.md",permalink:"/eightshift-docs/docs/basics/blocks-special-use-cases",sidebar_label:"Special Use Cases",sidebar:"docs",previous:{title:"Hooks",permalink:"/eightshift-docs/docs/basics/blocks-hooks"},next:{title:"Storybook",permalink:"/eightshift-docs/docs/basics/blocks-storybook"}},c=[{value:"Change innerBlock attributes",id:"change-innerblock-attributes",children:[]},{value:"Provide simple wrapper to all innerBlock",id:"provide-simple-wrapper-to-all-innerblock",children:[]},{value:"Override innerBlock attributes only on the frontend",id:"override-innerblock-attributes-only-on-the-frontend",children:[]},{value:"Add CSS selectors on the parent component inside the block editor",id:"add-css-selectors-on-the-parent-component-inside-the-block-editor",children:[]}],s={rightToc:c};function b(e){var t=e.components,o=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},s,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/"}),Object(a.b)("img",Object(n.a)({parentName:"a"},{src:"https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a",alt:"docs-source"})))),Object(a.b)("p",null,"For example, in our clients projects, we noticed that sometimes you need to provide something special to your blocks, like changing the block editor block DOM structure or change attributes added inside the inner blocks."),Object(a.b)("p",null,"These are some of the examples that we found that we would like to share with you. We will list all of them and gradually add more."),Object(a.b)("h2",{id:"change-innerblock-attributes"},"Change innerBlock attributes"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Usage:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Change attributes in the block editor and on the frontend."),Object(a.b)("li",{parentName:"ul"},"Set attributes in the database.")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Use Case:")),Object(a.b)("p",null,"Let's say you have a carousel block, and you have a generic image block that you can use as a standalone block. You create a carousel block and set in its manifest limitation to show only the image block to be inserted as an inner block. This is easy to do: you just add your image block to an ",Object(a.b)("inlineCode",{parentName:"p"},"allowedBlocks")," array inside the carousel block, and everything will work. "),Object(a.b)("p",null,"But now you have some default attributes set in that image block that you don't want to be set if the block is added using the innerBlock in the carousel. You can change that using our ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"helpers-javascript#overrideinnerblockattributes"}),"overrideInnerBlockAttributes")," helper. Just add this helper to your block entry point, add the attributes you want to change, and you are all set. "),Object(a.b)("p",null,"Keep in mind that this will be applied to all innerBlocks inside your carousel block. If you want to limit this to only a specific block, you will need to fiddle around with that block's conditions (you can get that specific block name from the props)."),Object(a.b)("p",null,"Next time you add your image to the carousel, it will automatically change those attributes."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Important note: If for some reason, you copy the inner block from the carousel to the top-level editor, this helper will not fire and not change back to original attributes. You have to manually remove those attributes from the Code editor in the admin.")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Implementation")),Object(a.b)("p",null,"Here you can see our example of this helper used in the ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/blob/develop/blocks/init/src/Blocks/custom/carousel/carousel-block.js"}),"carousel block"),"."),Object(a.b)("h2",{id:"provide-simple-wrapper-to-all-innerblock"},"Provide simple wrapper to all innerBlock"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Usage:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Change attributes in the block editor and on the frontend."),Object(a.b)("li",{parentName:"ul"},"Set attributes in the database.")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Use Case:")),Object(a.b)("p",null,"All of our blocks come with the wrapper implemented, and this is awesome. But sometimes you just don't want to use the wrapper, and you want only to use the simple version of the wrapper. You can provide the attribute overrides in your block, and you are good to go."),Object(a.b)("p",null,"But if you need to change attributes in the block added as an innerBlock, you'll have a little problem. You can use the same helper as we used in the previous chapter, or you can use our abstraction of that helper called ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"helpers-javascript#overrideinnerblocksimplewrapperattributes"}),"overrideInnerBlockSimpleWrapperAttributes"),"."),Object(a.b)("p",null,"This helper will set wrapper to simple variant in all your innerBlocks."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Implementation")),Object(a.b)("p",null,"Here you can see our example of this helper used in the ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/blob/develop/blocks/init/src/Blocks/custom/column/column-block.js"}),"column block"),"."),Object(a.b)("h2",{id:"override-innerblock-attributes-only-on-the-frontend"},"Override innerBlock attributes only on the frontend"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Usage:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Change attributes on the frontend only."),Object(a.b)("li",{parentName:"ul"},"Don't set attributes in the database.")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Use Case:")),Object(a.b)("p",null,"If you have a block containing inner blocks and only want to change attributes on the front end of the implementation and not in the block editor. The standard way is really hard because all inner blocks are rendered on the frontend as an HTML string, and you don't have access to any of the attributes before it is rendered."),Object(a.b)("p",null,"Luckily WordPress core has provided us with the filter that can change any block before it is rendered. This filter will provide you an array of block and inner block along with the innerBlock and all attributes if you use it correctly."),Object(a.b)("p",null,"The filter is called: ",Object(a.b)("inlineCode",{parentName:"p"},"render_block_data"),", and you can put your implementation in the ",Object(a.b)("inlineCode",{parentName:"p"},"class-blocks.php")," file. You can find documentation on this ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.wordpress.org/reference/hooks/render_block_data/"}),"link"),"."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Implementation")),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"Implementation coming soon.")),Object(a.b)("h2",{id:"add-css-selectors-on-the-parent-component-inside-the-block-editor"},"Add CSS selectors on the parent component inside the block editor"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Usage:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Change attributes on the frontend only."),Object(a.b)("li",{parentName:"ul"},"Don't set attributes in the database.")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Use Case:")),Object(a.b)("p",null,"If you tried to create any grid in your block on the front end, you know it is easy, but it is not so with the block editor. The problem is that in the block editor DOM, there are additional divs added over your block that breaks your HTML structure, and all your styles from flex or grid will not work correctly. If your block depends on some special selector placed in a specific place, you can run into some problems in the block editor."),Object(a.b)("p",null,"With WordPress Block Editor hooks, we can fix this by not adding the selector to its original location as we do on the front end but adding them to the Block Editor's parent component."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Implementation")),Object(a.b)("p",null,"Here you can see our example of this hook used in the ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/blob/develop/blocks/init/src/Blocks/custom/column/column-hooks.js"}),"column block"),"."))}b.isMDXComponent=!0},248:function(e,t,o){"use strict";o.d(t,"a",(function(){return u})),o.d(t,"b",(function(){return h}));var n=o(0),r=o.n(n);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=r.a.createContext({}),b=function(e){var t=r.a.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i({},t,{},e)),o},u=function(e){var t=b(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=b(o),d=n,h=u["".concat(l,".").concat(d)]||u[d]||p[d]||a;return o?r.a.createElement(h,i({ref:t},s,{components:o})):r.a.createElement(h,i({ref:t},s))}));function h(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,l=new Array(a);l[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,l[1]=i;for(var s=2;s<a;s++)l[s]=o[s];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,o)}d.displayName="MDXCreateElement"}}]);